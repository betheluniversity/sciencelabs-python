{% extends 'session/base.html' %}

{% block header %}
    <div class="header card">
        <div class="card-body">
            <p class="card-text">Deleted Sessions for {{ semester.term }} {{ semester.year }}</p>
        </div>
    </div>
{% endblock %}

{% block semester_switch %}
    {{ macros.semester_selector() }}
{% endblock %}

{% block body_content %}
    <table id="table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Date</th>
                <th scope="col">Date Deleted</th>
                <th scope="col">Time</th>
                <th scope="col">Room</th>
                <th scope="col">Tutors</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
        {% for session in sessions %}
            <tr>
                <td>{{ session.name }}</td>
                <td>{{ session.date.strftime('%m/%d/%Y') }}</td>
                <td>{{ session.deletedAt.strftime('%m/%d/%Y') }}</td>
                <td>{{ session.startTime|datetimeformat }} - {{ session.endTime|datetimeformat }}</td>
                {% if session.room %}
                    <td>{{ session.room }}</td>
                {% else %}
                    <td></td>
                {% endif %}
                <td>
                    <button id="blue" type="button" class="show-tutors btn btn-primary">Show</button>
                    <div style="display:none;margin-top:10px" class="text-left">
                        {% set tutors = session_tutors.get_session_tutors(session.id) %}
                        {% for tutor in tutors %}
                            {{ tutor.firstName }} {{ tutor.lastName }}
                            {% if tutor.isLead %}
                                <span class="button-labels">Lead</span>
                            {% endif %}
                            <br />
                        {% endfor %}
                    </div>
                </td>
                <td>
                    <div class="btn-group">
                        <a style="border-color: white;" href='{{ url_for('SessionView:edit_session', session_id=session.id) }}' id="darkblue" class="btn btn-primary">View/Edit Session</a>
                        <a style="border-color: white; "href='' id="darkblue" class="btn btn-primary">Restore</a>
                    </div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <script>
        $(document).ready( function () {
            $(".show-tutors").click(function() {
                $(this).next().toggle();
                if($(this).text() !== 'Show')
                    $(this).text('Show');
                else
                    $(this).text('Hide');
            });

            var table = $('#table').DataTable( {
                "aaSorting": [1, 'asc'],
                "bPaginate": false,
                "bFilter": false,
                "bInfo": false,

            });
        });
    </script>
{% endblock %}