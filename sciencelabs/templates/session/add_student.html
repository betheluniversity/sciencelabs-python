{% extends 'session/base.html' %}

{% block header %}
    <div class="header card">
        <div class="card-body">
            <p class="card-text">Add Student to Session</p>
        </div>
    </div>
{% endblock %}

{% block body_content %}
    <div class="row">
        <div class="col-md-8">
            <form>
                <div class="form-group">
                   <label for="choose-student">Registered Students</label>
                   <select id="choose-student" class="custom-select">
                       <option>Choose student...</option>
                       {% for student in student_list %}
                            <option value="{{ student.id }}">{{ student.firstName }} {{ student.lastName }}</option>
                       {% endfor %}
                    </select>
                </div>
                <button id="add-student" type="button" class="btn btn-primary">Submit</button>
            </form>
        </div>
        <div class="col-md-4">
            <div class="info card">
                <div class="card-body">
                    <p class="card-text">To add a student select their name from the "Registered Students" drop down
                        menu. If a student is not found in the registered list, you must add the student to the list by
                        using the <span id="gray" class="button-labels">Add</span> option on the
                        <span class="button-labels">Users</span> tab.</p>
                    <p class="card-text">Once the student name appears in the "Registered Student" field, press the
                        <span class="button-labels">Submit</span> button to pull the student's courses from Banner.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function(){

            $('#add-student').click(function(){
                var student = {
                    'sessionId': {{ session_id }},
                    'studentId': $('#choose-student :selected').val()
                };
                var url = '{{ url_for('SessionView:add_student_submit') }}';
                $.post(url, student, function(message){
                    window.location.replace('{{ url_for('SessionView:edit_session', session_id=session_id) }}');
                    alert(message);
                });
            });

        });
    </script>
{% endblock %}