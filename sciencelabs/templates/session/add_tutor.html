{% extends 'session/base.html' %}

{% block header %}
    <div class="header card">
        <div class="card-body">
            <p class="card-text">Add Tutor Attendance</p>
        </div>
    </div>
{% endblock %}

{% block body_content %}
    <div class="row">
        <div class="col-md-8">
            <form>
                <div class="form-row">
                    <div class="form-group">
                        <label for="choose-tutor">Registered Tutors</label>
                        <select id="choose-tutor" class="custom-select">
                           <option>Choose tutor...</option>
                            {% for tutor in tutor_list %}
                                <option value="{{ tutor.id }}">{{ tutor.firstName }} {{ tutor.lastName }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="time-in">Time In</label>
                        <input type="time" class="form-control" id="time-in">
                    </div>
                    <div class="form-group col-md-6">
                        <label for="time-out">Time Out</label>
                        <input type="time" class="form-control" id="time-out">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <div class="custom-control custom-checkbox" style="display:inline-block;">
                            <input type="checkbox" class="custom-control-input" id="lead">
                            <label class="custom-control-label" for="lead">This tutor served as the lead tutor for the session</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <button id="add-tutor" type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-md-4">
            <div class="info card">
                <div class="card-body">
                    <p>To add a tutor select their name from the "Registered Tutors" drop down menu. If a tutor is not found
                        in the registered tutors list, you must add the tutor to the list by using the
                        <span id="gray" class="button-labels">Add</span> option on the
                        <span class="button-labels">Users</span> tab.</p>
                    <p>Also fill in the "Time In" and "Time Out" fields, or leave blank if unkown.</p>
                    <p>To designate an unknown time in or out, leave these fields blank, or use the backpace key to clear
                        all fields. This unknown time will be listed as "???" in all reports, and will result in zero time
                        recorded for the user.</p>
                    <p>Finally, if necessary, designate the tutor as a lead tutor by checking the final box.</p>
                    <p>When all fields are correct, press the <span class="button-labels">Save</span> button to add the
                        tutor to the session.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function(){

            $('#add-tutor').click(function(){
                var lead = 0;
                if($('#lead').prop('checked')){
                    lead = 1;
                }
                var tutor = {
                    'sessionId': {{ session_id }},
                    'tutorId': $('#choose-tutor :selected').val(),
                    'timeIn': $('#time-in').val(),
                    'timeOut': $('#time-out').val(),
                    'lead': lead
                };
               var url = '{{ url_for('SessionView:add_tutor_submit') }}';
               $.post(url, tutor, function(message){
                   window.location.replace('{{ url_for('SessionView:edit_session', session_id=session_id) }}');
                   alert(message);
               });
            });

        });
    </script>
{% endblock %}