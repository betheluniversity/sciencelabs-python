{% extends 'session/base.html' %}

{% block header %}
    <div class="header card">
        <div class="card-body">
            {# TODO MAKE SURE TO UPDATE WHEN CONNECTING TO DATABASES #}
            <p class="card-text">Past Sessions for ***SEMESTER YEAR***</p>
        </div>
    </div>
{% endblock %}

{% block semester_switch %}
    <form class="form-inline">
        <button type="button" class="btn btn-primary">Set</button>
        <select class="custom-select">
            {% for semester in app_settings['SEMESTER_OPTIONS'] %}
                <option value="{{ semester }}">{{ semester }}</option>
            {% endfor %}
        </select>
    </form>
{% endblock %}

{% block body_content %}
    <form class="form">
        <div class="form-group">
            <input type="text" id="search-sessions-field" class="form-control" placeholder="Search">
        </div>
    </form>
    <table id="closed-table"  class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Time</th>
                <th>Room</th>
                <th>Tutors</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for session in sessions %}
                <tr>
                    <td>
                        {{ session.name + ' (' + session.date.strftime('%m/%d/%Y') + ')'  }}
                    </td>
                    <td>
                        {{ session.date.strftime('%m/%d/%Y') }}
                    </td>
                    <td>
                        {{ (timedelta_to_time + session.startTime).strftime('%l:%M%p') + ' - ' + (timedelta_to_time + session.endTime).strftime('%l:%M%p') }}
                    </td>
                    <td>
                        {{ session.room }}
                    </td>
                    <td>
                        <button type="button" class="show-tutors btn btn-primary">Show</button>
                        <div style="display:none;margin-top:10px" class="text-left">
                        {% set leads, tutors = session_tutors.get_session_tutors(session.id) %}
                        {% for lead in leads %}
                            {{ lead }} <span class="button-labels">Lead</span><br />
                        {% endfor %}
                        {% for tutor in tutors %}
                            {{ tutor }}<br />
                        {% endfor %}
                        </div>
                    </td>
                    <td>
                        <div class="btn-group">
                            <button id="edit-closed-session" type="button" class="edit btn btn-primary">Edit</button>
                            <button id="delete-closed-session" type="button" class="delete btn btn-primary">Delete</button>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        $(document).ready( function () {
            var table = $('#closed-table').DataTable( {
                "bPaginate": false,
                "bLengthChange": false,
            });
        });
    </script>

{% endblock %}