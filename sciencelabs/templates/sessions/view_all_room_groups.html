{% extends 'sessions/base.html' %}

{% block body_content %}
    <div class="custom-default row">
        <div class="form-group col-md-12">
            {% if not room_groups %}
                <h4>No room groupings exist.</h4>
            {% else %}
                <h4>View Room Groupings</h4>
                <table id="room-groups-table"  class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group ID">Room Group ID</th>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group Date">Room Group Date</th>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group Time">Room Group Time</th>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group Room">Room Group Room</th>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group Sessions">Room Group Sessions</th>
                            <th data-toggle="tooltip" data-placement="top" title="Room Group Capacity">Room Group Capacity</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for room_group in room_groups %}
                            {% set session = get_session(room_group.id) %}
                            <tr>
                                <td>
                                    {{ room_group.id }}
                                </td>
                                <td>
                                    {{ session.date.strftime('%m/%d/%Y') }}
                                </td>
                                <td>
                                    {{ session.schedStartTime|datetimeformat + ' - ' + session.schedEndTime|datetimeformat }}
                                </td>
                                <td>
                                    {{ session.room }}
                                </td>
                                <td>
                                    <button type="button" class="show-sessions blue btn btn-primary">Show</button>
                                    <div class="session-td text-left margin-top-10">
                                        {% for session in room_group_sessions[room_group.id] %}
                                            <p><a href="{{ url_for('SessionView:edit_session', session_id=session.id) }}">{{ session.name }}</a> - Capacity: {{ session.capacity }}</p>
                                            <br />
                                        {% endfor %}
                                    </div>
                                </td>
                                <td>
                                    <input type="number" min="0" class="form-control chosen-container chosen-format capacity" id="{{ room_group.id }}" name="capacity" value="{% if room_group.capacity %}{{ room_group.capacity }}{% else %}0{% endif %}" readonly>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </div>
    </div>
    <script>
        $(document).ready(function () {
            var table = $('#room-groups-table').DataTable( {
                "aoColumns": [
                    { "orderSequence": [ "asc", "desc" ] },
                    { "orderSequence": [ null ] },
                    { "orderSequence": [ null ] },
                    { "orderSequence": [ null ] },
                    { "orderSequence": [ null ] }
                ],
                "bPaginate": false,
                "bLengthChange": false,
                "bFilter": false,
                "bInfo": false
            });
        });
    </script>
{% endblock %}